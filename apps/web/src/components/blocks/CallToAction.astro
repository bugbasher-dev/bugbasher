---
import Button from '../ui/Button.astro'

interface Props {
  richText?: any
  links?: any[]
  blockType: 'cta'
}

const { richText, links } = Astro.props

// Simple content renderer for Lexical content
const renderLexicalContent = (content: any) => {
  if (!content || !content.root || !content.root.children) {
    return ''
  }
  
  return content.root.children.map((node: any) => {
    if (node.type === 'paragraph' && node.children) {
      const text = node.children.map((child: any) => child.text || '').join('')
      return `<p>${text}</p>`
    }
    if (node.type === 'heading' && node.children) {
      const text = node.children.map((child: any) => child.text || '').join('')
      const tag = node.tag || 'h2'
      return `<${tag}>${text}</${tag}>`
    }
    return ''
  }).join('')
}
---

<section class="py-20 bg-blue-50">
  <div class="container mx-auto px-4 text-center">
    {richText && (
      <div class="prose prose-lg max-w-none mb-8">
        <div set:html={renderLexicalContent(richText)} />
      </div>
    )}
    
    {links && links.length > 0 && (
      <div class="flex flex-wrap justify-center gap-4">
        {links.map((link) => (
          <Button 
            href={link.url || '#'}
            variant="primary"
            size="md"
          >
            {link.label}
          </Button>
        ))}
      </div>
    )}
  </div>
</section>