---
import Content from './blocks/Content.astro'
import MediaBlock from './blocks/MediaBlock.astro'
import CallToAction from './blocks/CallToAction.astro'
import Archive from './blocks/Archive.astro'
import FormBlock from './blocks/FormBlock.astro'

interface Props {
  blocks?: any[]
}

const { blocks } = Astro.props

if (!blocks || !Array.isArray(blocks)) {
  return null
}
---

<div class="blocks">
  {blocks.map((block) => {
    switch (block.blockType) {
      case 'content':
        return <Content {...block} />
      case 'mediaBlock':
        return <MediaBlock {...block} />
      case 'cta':
        return <CallToAction {...block} />
      case 'archive':
        return <Archive {...block} />
      case 'formBlock':
        return <FormBlock {...block} />
      default:
        return <div class="unsupported-block">Unsupported block type: {block.blockType}</div>
    }
  })}
</div>