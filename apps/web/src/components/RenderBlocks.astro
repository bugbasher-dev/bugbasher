---
import Content from './blocks/Content.astro'
import MediaBlock from './blocks/MediaBlock.astro'
import CallToAction from './blocks/CallToAction.astro'
import Archive from './blocks/Archive.astro'
import FormBlock from './blocks/FormBlock.astro'

interface Props {
  blocks?: any[]
}

const { blocks } = Astro.props

if (!blocks || !Array.isArray(blocks)) {
  return null
}
---

<div class="blocks">
  {blocks.map((block, index) => {
    switch (block.blockType) {
      case 'content':
        return <Content {...block} key={index} />
      case 'mediaBlock':
        return <MediaBlock {...block} key={index} />
      case 'cta':
        return <CallToAction {...block} key={index} />
      case 'archive':
        return <Archive {...block} key={index} />
      case 'formBlock':
        return <FormBlock {...block} key={index} />
      default:
        return <div key={index} class="unsupported-block">Unsupported block type: {block.blockType}</div>
    }
  })}
</div>