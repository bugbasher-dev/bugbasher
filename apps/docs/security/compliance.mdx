---
title: 'Compliance'
description: 'SOC 2, GDPR, and regulatory compliance information'
---

# Compliance

Epic Stack is designed to help you meet common compliance requirements including SOC 2, GDPR, and HIPAA.

## SOC 2 Compliance

SOC 2 evaluates organizations based on five Trust Service Criteria.

### Security (Common Criteria)

| Control | Implementation | Evidence |
|---------|----------------|----------|
| CC6.1 Logical Access | RBAC, session management | `packages/auth`, permission checks |
| CC6.6 Access Removal | Session invalidation, account deactivation | User ban system, session delete |
| CC6.7 Encryption | AES-256-GCM, bcrypt-12, TLS 1.3 | `packages/security/encryption.ts` |
| CC7.2 Security Monitoring | Audit logs, Sentry integration | `packages/audit`, `packages/observability` |
| CC7.3 Incident Response | Documented procedures | `docs/security/incident-response.mdx` |

### Availability

| Control | Implementation | Evidence |
|---------|----------------|----------|
| A1.1 Capacity Planning | Fly.io auto-scaling | `fly.toml` configuration |
| A1.2 System Monitoring | Health checks, metrics | `/resources/healthcheck` endpoint |
| A1.3 Backup/Recovery | Automated backups | `.github/workflows/backup.yml` |

### Processing Integrity

| Control | Implementation | Evidence |
|---------|----------------|----------|
| PI1.4 Input Validation | Zod schemas | `packages/validation` |
| PI1.5 Error Handling | Structured error responses | Error boundaries, try/catch |

### Confidentiality

| Control | Implementation | Evidence |
|---------|----------------|----------|
| C1.1 Data Classification | PII handling, encryption | Content sanitization, logging redaction |
| C1.2 Data Disposal | Cascade deletes, retention policies | Prisma schema, audit archival |

### Privacy

| Control | Implementation | Evidence |
|---------|----------------|----------|
| P3.2 Privacy Notice | User consent, data collection | Terms of service implementation |
| P4.2 Data Retention | Configurable retention | `AuditLogRetentionPolicy` model |
| P6.1 Data Access | Data export endpoint | `/resources/download-user-data` |
| P6.5 Data Deletion | Account deletion | User delete with cascade |

## GDPR Compliance

### Data Subject Rights

| Right | Implementation | Endpoint/Feature |
|-------|----------------|------------------|
| Right to Access | Data export | `GET /resources/download-user-data` |
| Right to Rectification | Profile editing | Settings pages |
| Right to Erasure | Account deletion | Delete account flow |
| Right to Portability | JSON data export | Download user data |
| Right to Object | Consent management | User preferences |

### Lawful Basis for Processing

Document your lawful basis in your privacy policy:

- **Consent**: Marketing communications
- **Contract**: Service delivery
- **Legal Obligation**: Tax records, compliance logs
- **Legitimate Interest**: Security monitoring, fraud prevention

### Data Processing Records

Maintain records of processing activities:

```typescript
// Example processing activity record
const processingActivity = {
  name: 'User Authentication',
  purpose: 'Verify user identity for access control',
  dataCategories: ['email', 'password hash', 'session data'],
  dataSubjects: ['Users'],
  recipients: ['None - processed internally'],
  retention: 'Session data: until logout, Auth logs: 1 year',
  safeguards: 'Encryption, access controls, audit logging',
}
```

### Breach Notification

GDPR requires breach notification within 72 hours:

1. **Assess the breach** - What data was affected?
2. **Contain the breach** - Stop ongoing exposure
3. **Document everything** - Timeline, scope, actions
4. **Notify authorities** - Within 72 hours if required
5. **Notify users** - If high risk to their rights

## HIPAA Considerations

<Warning>
  Epic Stack is not HIPAA-certified out of the box. Additional measures are required for handling Protected Health Information (PHI).
</Warning>

If handling PHI, consider:

- **Business Associate Agreements** with cloud providers
- **PHI encryption** at rest and in transit (already implemented)
- **Access logging** for all PHI access (extend audit logging)
- **Minimum necessary** access controls
- **Regular risk assessments**

## Compliance Checklist

### Pre-Launch

- [ ] Privacy policy published
- [ ] Terms of service published
- [ ] Cookie consent implemented (if applicable)
- [ ] Data processing records documented
- [ ] Security controls verified
- [ ] Encryption keys properly managed
- [ ] Backup procedures tested

### Ongoing

- [ ] Regular security scans (automated)
- [ ] Dependency vulnerability monitoring
- [ ] Access reviews (quarterly)
- [ ] Audit log reviews (monthly)
- [ ] Backup restoration tests (quarterly)
- [ ] Security training (annual)
- [ ] Penetration testing (annual)

### Documentation

- [ ] System architecture diagram
- [ ] Data flow diagrams
- [ ] Security policies
- [ ] Incident response plan
- [ ] Business continuity plan
- [ ] Vendor security assessments

## Audit Evidence

### Automated Evidence Collection

The CI/CD pipeline generates security evidence:

```yaml
# .github/workflows/security.yml generates:
- npm-audit-report.json    # Dependency vulnerabilities
- semgrep-results.sarif    # SAST findings
- trivy-fs-results.sarif   # Filesystem scan
```

### Audit Log Queries

Export audit logs for compliance reviews:

```typescript
const complianceLogs = await auditService.query({
  organizationId,
  startDate: auditPeriodStart,
  endDate: auditPeriodEnd,
  actions: [
    AuditAction.USER_CREATED,
    AuditAction.USER_DELETED,
    AuditAction.PERMISSION_CHANGED,
    AuditAction.DATA_EXPORT_REQUESTED,
    AuditAction.LOGIN,
    AuditAction.LOGOUT,
  ],
})
```

### Retention Policies

Configure retention per compliance requirements:

| Compliance | Retention Period | Configuration |
|------------|------------------|---------------|
| SOC 2 | 1 year minimum | Default: 365 days |
| GDPR | As long as necessary | Configurable per org |
| HIPAA | 6 years | Set: 2190 days |
| PCI DSS | 1 year | Default: 365 days |

```typescript
await prisma.auditLogRetentionPolicy.create({
  data: {
    organizationId,
    retentionDays: 365,
    hotStorageDays: 180,
    archiveEnabled: true,
    complianceType: 'SOC2',
    immutable: true,
  },
})
```

## Third-Party Certifications

Epic Stack leverages certified infrastructure:

| Provider | Certifications |
|----------|----------------|
| Fly.io | SOC 2 Type II |
| Tigris (S3) | SOC 2 Type II |
| Sentry | SOC 2 Type II, GDPR |
| Resend (Email) | SOC 2 Type II |

Request vendor security documentation for your audit package.
